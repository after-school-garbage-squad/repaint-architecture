# イベントログに関する仕様

[イベントログの定義とデータについて](./data.md#イベントログ)

## イベントログの活用先

イベントログは、イベント運営が Grafana でイベントのメトリクスを可視化するために使用される。
イベントログは、Functions で PromQL に変換され、Grafana から参照される。

## イベントログのログシステム

### バックエンド API

バックエンド API から NoSQL にログを書き込む。

#### 書き込むタイミング・内容

- 人流制御時
  [人流制御のイベントログ](./data.md#人流制御のイベントログ)
- 参加者がピックしたとき
  [参加者関連のイベントログ](./data.md#参加者関連のイベントログ)
- 参加者が移動した時
  [参加者関連のイベントログ](./data.md#参加者関連のイベントログ)
- 参加者がイベントに参加した時(イベント参加用の QR コードを読み込んだ時)
  [システム全体のイベントログ](./data.md#システム全体のイベントログ)

### バックエンド DB

バックエンド DB の内容を定期的にバッチ処理で集計し、イベントログを作成する。
[システム全体のイベントログ](./data.md#システム全体のイベントログ)
[スポットのイベントログ](./data.md#スポットのイベントログ)

## イベントログのバッチ

一分未満の細かいログを定期的に一分にまとめる。
