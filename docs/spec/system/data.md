# システムの仕様 - データ

## ビーコン

### 検知に必要なデータ

- Service UUID
- HWID

### 検知したデータ

- Service UUID
- HWID
- RSSI

## QR コード

### LP/イベント参加兼用コード

`https://<LPのドメイン>/?event=<イベントID>`

### ピックスポットのパレット取得コード

```JSON
{
  "type": "object",
  "properties": {
    "event_id": {
      "type": "string"
    },
    "spot_id": {
      "type": "string"
    }
  },
  "required": ["event_id", "spot_id"]
}
```

### 参加者識別コード

```JSON
{
  "type": "object",
  "properties": {
    "event_id": {
      "type": "string"
    },
    "user_id": {
      "type": "string"
    }
  },
  "required": ["event_id", "user_id"]
}
```

## イベント関係

### イベントデータ

イベントに関するメタデータの事。

- イベント自体のデータ
  - イベント名
  - HP の URL
  - イベント運営への連絡情報
  - デフォルト画像(複数枚)
- イベントに関連したデータ
  - スポット
  - 管理者

### イベントログ

イベントに関するログの事。

以下のような情報がタイムスタンプと共に定期的に記録される。
最大で 15 分とするが、1 分程度の間隔で記録したい。それより短い場合は、定期的にバッチ処理で一分ごとのデータにまとめるので問題はない。

#### ログの内容

全てのログにはタイムスタンプを含む
()の内容は難しそうならば、仕様から削除することも検討する。

##### システム全体のイベントログ

- 総登録ユーザー数
- アクティブユーザー数

##### 人流制御のイベントログ

- 人流制御の開始点と終点
- 何人の参加者に対して通知を行ったか
- (人流制御開始時から終了時までにどれだけの人数が開始点から終点に移動をしたか)

##### スポットのイベントログ

- スポットの ID
- スポットに滞在している参加者の人数
- スポットにドロップしているパレットの数
- 累積のスポットを通過した参加者の人数(ユニークな人数ではない)

##### 参加者関連のイベントログ

- 参加者の ID
- 写真撮影済みかどうか
- パレットの収集率

その他、特定のアクションの時に追加するデータ

- ピックした時
  - ピックしたスポットの ID
- 移動した時
  - 移動したスポットの ID(移動元と移動先)

## 参加者アカウントのデータ

### プライバシーに関わるデータ

- 撮影した画像
- 通知用のトークン

### プライバシーに関わらないデータ

- パレットの収集状況
- 参加者に関連するイベントログ
  (直接的には個人が識別できないため)
